| Scenario                                                                                                                                                                                                                                      | Answer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Ensure that in the event of a failed deployment, there should be in place prevent subsequent deployments. The service must strictly maintain full capacity during API deployment without any reduced capacity to avoid degradation of service | Deploy DynamoDB, Lambda, ES domain using CloudFormation. Deploy changes with a CodeDeploy blue/green deployment. Host the web app in Elastic Beanstalk and set the deployment policy to `Immutable`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Multi-AZ RDS. Need to upgrade RDS instances to latest major version. Ensure minimum downtime when doing the upgrade                                                                                                                           | In the `AWS::RDS::DBInstance` resource type in CloudFormation template, update the `EngineVersion` property to the latest MySQL db version. Create a second app stack and launch a new Read Replica with the same properties as the primary db instance that will be upgraded. Finally, perform and `UpdateStack` operation in CloudFormation                                                                                                                                                                                                                                                                                                                                                                          |
| DynamoDB table must be available in all 3 regions to deliver low-latency data access. When the table is updated in one region, the change must seamlessly propagate to the other regions                                                      | Provision a multi-region, multi-active DynamoDB global table that includes the 3 regions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Making S3 multi-regional. Important assets must always be accessible. Deploy the app to multiple regions. Users must use the same endpoint to access the assets                                                                               | (1) Utilize CloudFormation StackSets to provision a new S3 bucket with versioning enabled in multiple regions. Create several S3 replication rules on the new S3 bucket in the primary region to replicate all its contents to the other regions. Copy the important assets from the existing S3 bucket to the new S3 bucket in the primary region. (2) Create a CloudFront distribution and configure new origins for each bucket. Create an origin group containing all the recently created origins, then modify the default behaviour of the distribution to use the new origin group. (3) Create an alias record in Route53 and configure a simple routing policy that uses the CloudFront distribution as target |
| Adding EC2 instances to handle peak load. But each instance takes more than half an hour to download the required application libraries and become fully configured. Most resilient solution that will lesson deployment time                 | Host entire app on Elastic Beanstalk. Create a custom AMI using Systems Manager Automation which includes all the dependencies. Configure EB env to have an ASG of EC2 instances across multi-AZ with a load balancer in front. Enable DynamoDB Auto Scaling and point the application DNS record to the EB load balancer using Route53.                                                                                                                                                                                                                                                                                                                                                                               |

# Notes
- `Immutable` deployment performs an immutable update to launch a full set of new instances running the new version of app in separate ASG, alongside the instances running the old version. Can prevent issues caused by partially completed rolling deployments. If the new instances don't pass health check, Elastic Beanstalk terminates them, leaving the original instance untouched 
- `DynamoDB global table` provide automatic multi-active replication to regions worldwide. Global tables don't have read replicas
- `S3 Replication` enables automatic, asynchronous copying of objects across S3 buckets. Destination buckets can be in different region. Requires the source/destination buckets to have versioning enabled
- `CloudFront origin group` can be used to configure origin failover for scenarios when you need HA. Use origin failover to designate primary origin for CF + second origin that CF automatically switches when the primary origin returns specific HTTP status code failure responses